# stations.py の冒頭をこれに差し替えてください
ALL_LINES = [
    {"id": "yamanote", "name": "山手線", "color": "#008000"},
    {"id": "chuo", "name": "中央線(快速)", "color": "#ff8c00"},
    {"id": "saikyo", "name": "埼京線", "color": "#00ac9a"},
    {"id": "shonan", "name": "湘南新宿ライン", "color": "#e62222"},
    {"id": "denentoshi", "name": "東急田園都市線", "color": "#20af3c"},
    {"id": "hanzomon", "name": "東京メトロ半蔵門線", "color": "#9b7cb6"},
]

# 駅データ (4路線・全85駅)
STATIONS = [
    # --- 山手線 (30駅) ---
    {
        "id": "y01",
        "name": "東京駅",
        "name_en": "Tokyo",
        "line_id": "yamanote",
        "lat": 35.6812,
        "lng": 139.7671,
    },
    {
        "id": "y02",
        "name": "神田駅",
        "name_en": "Kanda",
        "line_id": "yamanote",
        "lat": 35.6916,
        "lng": 139.7708,
    },
    {
        "id": "y03",
        "name": "秋葉原駅",
        "name_en": "Akihabara",
        "line_id": "yamanote",
        "lat": 35.6983,
        "lng": 139.7730,
    },
    {
        "id": "y04",
        "name": "御徒町駅",
        "name_en": "Okachimachi",
        "line_id": "yamanote",
        "lat": 35.7074,
        "lng": 139.7747,
    },
    {
        "id": "y05",
        "name": "上野駅",
        "name_en": "Ueno",
        "line_id": "yamanote",
        "lat": 35.7137,
        "lng": 139.7772,
    },
    {
        "id": "y06",
        "name": "鶯谷駅",
        "name_en": "Uguisudani",
        "line_id": "yamanote",
        "lat": 35.7204,
        "lng": 139.7788,
    },
    {
        "id": "y07",
        "name": "日暮里駅",
        "name_en": "Nippori",
        "line_id": "yamanote",
        "lat": 35.7277,
        "lng": 139.7709,
    },
    {
        "id": "y08",
        "name": "西日暮里駅",
        "name_en": "NishiNippori",
        "line_id": "yamanote",
        "lat": 35.7321,
        "lng": 139.7667,
    },
    {
        "id": "y09",
        "name": "田端駅",
        "name_en": "Tabata",
        "line_id": "yamanote",
        "lat": 35.7380,
        "lng": 139.7608,
    },
    {
        "id": "y10",
        "name": "駒込駅",
        "name_en": "Komagome",
        "line_id": "yamanote",
        "lat": 35.7364,
        "lng": 139.7468,
    },
    {
        "id": "y11",
        "name": "巣鴨駅",
        "name_en": "Sugamo",
        "line_id": "yamanote",
        "lat": 35.7334,
        "lng": 139.7393,
    },
    {
        "id": "y12",
        "name": "大塚駅",
        "name_en": "Otsuka",
        "line_id": "yamanote",
        "lat": 35.7314,
        "lng": 139.7286,
    },
    {
        "id": "y13",
        "name": "池袋駅",
        "name_en": "Ikebukuro",
        "line_id": "yamanote",
        "lat": 35.7289,
        "lng": 139.7103,
    },
    {
        "id": "y14",
        "name": "目白駅",
        "name_en": "Mejiro",
        "line_id": "yamanote",
        "lat": 35.7212,
        "lng": 139.7062,
    },
    {
        "id": "y15",
        "name": "高田馬場駅",
        "name_en": "Takadanobaba",
        "line_id": "yamanote",
        "lat": 35.7122,
        "lng": 139.7037,
    },
    {
        "id": "y16",
        "name": "新大久保駅",
        "name_en": "ShinOkubo",
        "line_id": "yamanote",
        "lat": 35.7013,
        "lng": 139.7002,
    },
    {
        "id": "y17",
        "name": "新宿駅",
        "name_en": "Shinjuku",
        "line_id": "yamanote",
        "lat": 35.6896,
        "lng": 139.7005,
    },
    {
        "id": "y18",
        "name": "代々木駅",
        "name_en": "Yoyogi",
        "line_id": "yamanote",
        "lat": 35.6830,
        "lng": 139.7020,
    },
    {
        "id": "y19",
        "name": "原宿駅",
        "name_en": "Harajuku",
        "line_id": "yamanote",
        "lat": 35.6701,
        "lng": 139.7026,
    },
    {
        "id": "y20",
        "name": "渋谷駅",
        "name_en": "Shibuya",
        "line_id": "yamanote",
        "lat": 35.6580,
        "lng": 139.7016,
    },
    {
        "id": "y21",
        "name": "恵比寿駅",
        "name_en": "Ebisu",
        "line_id": "yamanote",
        "lat": 35.6466,
        "lng": 139.7101,
    },
    {
        "id": "y22",
        "name": "目黒駅",
        "name_en": "Meguro",
        "line_id": "yamanote",
        "lat": 35.6339,
        "lng": 139.7157,
    },
    {
        "id": "y23",
        "name": "五反田駅",
        "name_en": "Gotanda",
        "line_id": "yamanote",
        "lat": 35.6264,
        "lng": 139.7234,
    },
    {
        "id": "y24",
        "name": "大崎駅",
        "name_en": "Osaki",
        "line_id": "yamanote",
        "lat": 35.6197,
        "lng": 139.7285,
    },
    {
        "id": "y25",
        "name": "品川駅",
        "name_en": "Shinagawa",
        "line_id": "yamanote",
        "lat": 35.6284,
        "lng": 139.7387,
    },
    {
        "id": "y26",
        "name": "高輪ゲートウェイ駅",
        "name_en": "TakanawaGateway",
        "line_id": "yamanote",
        "lat": 35.6355,
        "lng": 139.7407,
    },
    {
        "id": "y27",
        "name": "田町駅",
        "name_en": "Tamachi",
        "line_id": "yamanote",
        "lat": 35.6457,
        "lng": 139.7475,
    },
    {
        "id": "y28",
        "name": "浜松町駅",
        "name_en": "Hamamatsucho",
        "line_id": "yamanote",
        "lat": 35.6556,
        "lng": 139.7567,
    },
    {
        "id": "y29",
        "name": "新橋駅",
        "name_en": "Shimbashi",
        "line_id": "yamanote",
        "lat": 35.6663,
        "lng": 139.7583,
    },
    {
        "id": "y30",
        "name": "有楽町駅",
        "name_en": "Yurakucho",
        "line_id": "yamanote",
        "lat": 35.6750,
        "lng": 139.7633,
    },
    # --- 中央線快速 (24駅) ---
    {
        "id": "c01",
        "name": "東京駅",
        "name_en": "Tokyo",
        "line_id": "chuo",
        "lat": 35.6812,
        "lng": 139.7671,
    },
    {
        "id": "c02",
        "name": "神田駅",
        "name_en": "Kanda",
        "line_id": "chuo",
        "lat": 35.6916,
        "lng": 139.7708,
    },
    {
        "id": "c03",
        "name": "御茶ノ水駅",
        "name_en": "Ochanomizu",
        "line_id": "chuo",
        "lat": 35.6997,
        "lng": 139.7652,
    },
    {
        "id": "c04",
        "name": "四ツ谷駅",
        "name_en": "Yotsuya",
        "line_id": "chuo",
        "lat": 35.6860,
        "lng": 139.7306,
    },
    {
        "id": "c05",
        "name": "新宿駅",
        "name_en": "Shinjuku",
        "line_id": "chuo",
        "lat": 35.6896,
        "lng": 139.7005,
    },
    {
        "id": "c06",
        "name": "中野駅",
        "name_en": "Nakano",
        "line_id": "chuo",
        "lat": 35.7057,
        "lng": 139.6658,
    },
    {
        "id": "c07",
        "name": "高円寺駅",
        "name_en": "Koenji",
        "line_id": "chuo",
        "lat": 35.7053,
        "lng": 139.6496,
    },
    {
        "id": "c08",
        "name": "阿佐ケ谷駅",
        "name_en": "Asagaya",
        "line_id": "chuo",
        "lat": 35.7048,
        "lng": 139.6358,
    },
    {
        "id": "c09",
        "name": "荻窪駅",
        "name_en": "Ogikubo",
        "line_id": "chuo",
        "lat": 35.7043,
        "lng": 139.6197,
    },
    {
        "id": "c10",
        "name": "西荻窪駅",
        "name_en": "NishiOgikubo",
        "line_id": "chuo",
        "lat": 35.7038,
        "lng": 139.5995,
    },
    {
        "id": "c11",
        "name": "吉祥寺駅",
        "name_en": "Kichijoji",
        "line_id": "chuo",
        "lat": 35.7031,
        "lng": 139.5798,
    },
    {
        "id": "c12",
        "name": "三鷹駅",
        "name_en": "Mitaka",
        "line_id": "chuo",
        "lat": 35.7023,
        "lng": 139.5605,
    },
    {
        "id": "c13",
        "name": "武蔵境駅",
        "name_en": "MusashiSakai",
        "line_id": "chuo",
        "lat": 35.7020,
        "lng": 139.5446,
    },
    {
        "id": "c14",
        "name": "東小金井駅",
        "name_en": "HigashiKoganei",
        "line_id": "chuo",
        "lat": 35.7016,
        "lng": 139.5241,
    },
    {
        "id": "c15",
        "name": "武蔵小金井駅",
        "name_en": "MusashiKoganei",
        "line_id": "chuo",
        "lat": 35.7010,
        "lng": 139.5064,
    },
    {
        "id": "c16",
        "name": "国分寺駅",
        "name_en": "Kokubunji",
        "line_id": "chuo",
        "lat": 35.7000,
        "lng": 139.4802,
    },
    {
        "id": "c17",
        "name": "西国分寺駅",
        "name_en": "NishiKokubunji",
        "line_id": "chuo",
        "lat": 35.6997,
        "lng": 139.4659,
    },
    {
        "id": "c18",
        "name": "国立駅",
        "name_en": "Kunitachi",
        "line_id": "chuo",
        "lat": 35.6992,
        "lng": 139.4461,
    },
    {
        "id": "c19",
        "name": "立川駅",
        "name_en": "Tachikawa",
        "line_id": "chuo",
        "lat": 35.6983,
        "lng": 139.4137,
    },
    {
        "id": "c20",
        "name": "日野駅",
        "name_en": "Hino",
        "line_id": "chuo",
        "lat": 35.6790,
        "lng": 139.3938,
    },
    {
        "id": "c21",
        "name": "豊田駅",
        "name_en": "Toyoda",
        "line_id": "chuo",
        "lat": 35.6593,
        "lng": 139.3814,
    },
    {
        "id": "c22",
        "name": "八王子駅",
        "name_en": "Hachioji",
        "line_id": "chuo",
        "lat": 35.6555,
        "lng": 139.3389,
    },
    {
        "id": "c23",
        "name": "西八王子駅",
        "name_en": "NishiHachioji",
        "line_id": "chuo",
        "lat": 35.6566,
        "lng": 139.3126,
    },
    {
        "id": "c24",
        "name": "高尾駅",
        "name_en": "Takao",
        "line_id": "chuo",
        "lat": 35.6420,
        "lng": 139.2822,
    },
    # --- 埼京線 (19駅) ---
    {
        "id": "s01",
        "name": "大崎駅",
        "name_en": "Osaki",
        "line_id": "saikyo",
        "lat": 35.6197,
        "lng": 139.7285,
    },
    {
        "id": "s02",
        "name": "恵比寿駅",
        "name_en": "Ebisu",
        "line_id": "saikyo",
        "lat": 35.6466,
        "lng": 139.7101,
    },
    {
        "id": "s03",
        "name": "渋谷駅",
        "name_en": "Shibuya",
        "line_id": "saikyo",
        "lat": 35.6580,
        "lng": 139.7016,
    },
    {
        "id": "s04",
        "name": "新宿駅",
        "name_en": "Shinjuku",
        "line_id": "saikyo",
        "lat": 35.6896,
        "lng": 139.7005,
    },
    {
        "id": "s05",
        "name": "池袋駅",
        "name_en": "Ikebukuro",
        "line_id": "saikyo",
        "lat": 35.7289,
        "lng": 139.7103,
    },
    {
        "id": "s06",
        "name": "板橋駅",
        "name_en": "Itabashi",
        "line_id": "saikyo",
        "lat": 35.7469,
        "lng": 139.7196,
    },
    {
        "id": "s07",
        "name": "十条駅",
        "name_en": "Jujo",
        "line_id": "saikyo",
        "lat": 35.7607,
        "lng": 139.7222,
    },
    {
        "id": "s08",
        "name": "赤羽駅",
        "name_en": "Akabane",
        "line_id": "saikyo",
        "lat": 35.7777,
        "lng": 139.7208,
    },
    {
        "id": "s09",
        "name": "北赤羽駅",
        "name_en": "KitaAkabane",
        "line_id": "saikyo",
        "lat": 35.7876,
        "lng": 139.7061,
    },
    {
        "id": "s10",
        "name": "浮間舟渡駅",
        "name_en": "UkimaFunado",
        "line_id": "saikyo",
        "lat": 35.7913,
        "lng": 139.6912,
    },
    {
        "id": "s11",
        "name": "戸田公園駅",
        "name_en": "TodaKoen",
        "line_id": "saikyo",
        "lat": 35.8078,
        "lng": 139.6780,
    },
    {
        "id": "s12",
        "name": "戸田駅",
        "name_en": "Toda",
        "line_id": "saikyo",
        "lat": 35.8176,
        "lng": 139.6698,
    },
    {
        "id": "s13",
        "name": "北戸田駅",
        "name_en": "KitaToda",
        "line_id": "saikyo",
        "lat": 35.8315,
        "lng": 139.6606,
    },
    {
        "id": "s14",
        "name": "武蔵浦和駅",
        "name_en": "MusashiUrawa",
        "line_id": "saikyo",
        "lat": 35.8455,
        "lng": 139.6469,
    },
    {
        "id": "s15",
        "name": "中浦和駅",
        "name_en": "NakaUrawa",
        "line_id": "saikyo",
        "lat": 35.8538,
        "lng": 139.6375,
    },
    {
        "id": "s16",
        "name": "南与野駅",
        "name_en": "MinamiYono",
        "line_id": "saikyo",
        "lat": 35.8677,
        "lng": 139.6310,
    },
    {
        "id": "s17",
        "name": "与野本町駅",
        "name_en": "Yonohonmachi",
        "line_id": "saikyo",
        "lat": 35.8812,
        "lng": 139.6267,
    },
    {
        "id": "s18",
        "name": "北与野駅",
        "name_en": "KitaYono",
        "line_id": "saikyo",
        "lat": 35.8893,
        "lng": 139.6310,
    },
    {
        "id": "s19",
        "name": "大宮駅",
        "name_en": "Omiya",
        "line_id": "saikyo",
        "lat": 35.9063,
        "lng": 139.6240,
    },
    # --- 湘南新宿ライン (12駅) ---
    {
        "id": "ss01",
        "name": "大宮駅",
        "name_en": "Omiya",
        "line_id": "shonan",
        "lat": 35.9063,
        "lng": 139.6240,
    },
    {
        "id": "ss02",
        "name": "浦和駅",
        "name_en": "Urawa",
        "line_id": "shonan",
        "lat": 35.8590,
        "lng": 139.6571,
    },
    {
        "id": "ss03",
        "name": "赤羽駅",
        "name_en": "Akabane",
        "line_id": "shonan",
        "lat": 35.7777,
        "lng": 139.7208,
    },
    {
        "id": "ss04",
        "name": "池袋駅",
        "name_en": "Ikebukuro",
        "line_id": "shonan",
        "lat": 35.7289,
        "lng": 139.7103,
    },
    {
        "id": "ss05",
        "name": "新宿駅",
        "name_en": "Shinjuku",
        "line_id": "shonan",
        "lat": 35.6896,
        "lng": 139.7005,
    },
    {
        "id": "ss06",
        "name": "渋谷駅",
        "name_en": "Shibuya",
        "line_id": "shonan",
        "lat": 35.6580,
        "lng": 139.7016,
    },
    {
        "id": "ss07",
        "name": "恵比寿駅",
        "name_en": "Ebisu",
        "line_id": "shonan",
        "lat": 35.6466,
        "lng": 139.7101,
    },
    {
        "id": "ss08",
        "name": "大崎駅",
        "name_en": "Osaki",
        "line_id": "shonan",
        "lat": 35.6197,
        "lng": 139.7285,
    },
    {
        "id": "ss09",
        "name": "武蔵小杉駅",
        "name_en": "MusashiKosugi",
        "line_id": "shonan",
        "lat": 35.5751,
        "lng": 139.6631,
    },
    {
        "id": "ss10",
        "name": "横浜駅",
        "name_en": "Yokohama",
        "line_id": "shonan",
        "lat": 35.4658,
        "lng": 139.6223,
    },
    {
        "id": "ss11",
        "name": "戸塚駅",
        "name_en": "Totsuka",
        "line_id": "shonan",
        "lat": 35.3882,
        "lng": 139.5350,
    },
    {
        "id": "ss12",
        "name": "大船駅",
        "name_en": "Ofuna",
        "line_id": "shonan",
        "lat": 35.3532,
        "lng": 139.5312,
    },
    {
        "id": "dt01",
        "name": "渋谷駅",
        "name_en": "Shibuya",
        "line_id": "denentoshi",
        "lat": 35.6580,
        "lng": 139.7016,
    },
    {
        "id": "dt02",
        "name": "池尻大橋駅",
        "name_en": "IkejiriOhashi",
        "line_id": "denentoshi",
        "lat": 35.6505,
        "lng": 139.6838,
    },
    {
        "id": "dt03",
        "name": "三軒茶屋駅",
        "name_en": "SangenJaya",
        "line_id": "denentoshi",
        "lat": 35.6433,
        "lng": 139.6713,
    },
    {
        "id": "dt04",
        "name": "駒沢大学駅",
        "name_en": "KomazawaDaigaku",
        "line_id": "denentoshi",
        "lat": 35.6326,
        "lng": 139.6610,
    },
    {
        "id": "dt05",
        "name": "桜新町駅",
        "name_en": "SakuraShinmachi",
        "line_id": "denentoshi",
        "lat": 35.6315,
        "lng": 139.6453,
    },
    {
        "id": "dt06",
        "name": "用賀駅",
        "name_en": "Yoga",
        "line_id": "denentoshi",
        "lat": 35.6264,
        "lng": 139.6353,
    },
    {
        "id": "dt07",
        "name": "二子玉川駅",
        "name_en": "FutakoTamagawa",
        "line_id": "denentoshi",
        "lat": 35.6115,
        "lng": 139.6268,
    },
    {
        "id": "dt08",
        "name": "二子新地駅",
        "name_en": "FutakoShinchi",
        "line_id": "denentoshi",
        "lat": 35.6071,
        "lng": 139.6225,
    },
    {
        "id": "dt09",
        "name": "高津駅",
        "name_en": "Takatsu",
        "line_id": "denentoshi",
        "lat": 35.6033,
        "lng": 139.6169,
    },
    {
        "id": "dt10",
        "name": "溝の口駅",
        "name_en": "Mizonokuchi",
        "line_id": "denentoshi",
        "lat": 35.5996,
        "lng": 139.6105,
    },
    {
        "id": "dt11",
        "name": "梶が谷駅",
        "name_en": "Kajigaya",
        "line_id": "denentoshi",
        "lat": 35.5937,
        "lng": 139.6053,
    },
    {
        "id": "dt12",
        "name": "宮崎台駅",
        "name_en": "Miyazakidai",
        "line_id": "denentoshi",
        "lat": 35.5880,
        "lng": 139.5919,
    },
    {
        "id": "dt13",
        "name": "宮前平駅",
        "name_en": "Miyamaedaira",
        "line_id": "denentoshi",
        "lat": 35.5846,
        "lng": 139.5816,
    },
    {
        "id": "dt14",
        "name": "鷺沼駅",
        "name_en": "Saginuma",
        "line_id": "denentoshi",
        "lat": 35.5794,
        "lng": 139.5732,
    },
    {
        "id": "dt15",
        "name": "たまプラーザ駅",
        "name_en": "TamaPlaza",
        "line_id": "denentoshi",
        "lat": 35.5786,
        "lng": 139.5583,
    },
    {
        "id": "dt16",
        "name": "あざみ野駅",
        "name_en": "Azamino",
        "line_id": "denentoshi",
        "lat": 35.5683,
        "lng": 139.5534,
    },
    {
        "id": "dt17",
        "name": "江田駅",
        "name_en": "Eda",
        "line_id": "denentoshi",
        "lat": 35.5586,
        "lng": 139.5516,
    },
    {
        "id": "dt18",
        "name": "市が尾駅",
        "name_en": "Ichigao",
        "line_id": "denentoshi",
        "lat": 35.5517,
        "lng": 139.5413,
    },
    {
        "id": "dt19",
        "name": "藤が丘駅",
        "name_en": "Fujigaoka",
        "line_id": "denentoshi",
        "lat": 35.5434,
        "lng": 139.5284,
    },
    {
        "id": "dt20",
        "name": "青葉台駅",
        "name_en": "Aobadai",
        "line_id": "denentoshi",
        "lat": 35.5431,
        "lng": 139.5169,
    },
    {
        "id": "dt21",
        "name": "田奈駅",
        "name_en": "Tana",
        "line_id": "denentoshi",
        "lat": 35.5358,
        "lng": 139.5042,
    },
    {
        "id": "dt22",
        "name": "長津田駅",
        "name_en": "Nagatsuta",
        "line_id": "denentoshi",
        "lat": 35.5317,
        "lng": 139.4950,
    },
    {
        "id": "dt23",
        "name": "つくし野駅",
        "name_en": "Tsukushino",
        "line_id": "denentoshi",
        "lat": 35.5273,
        "lng": 139.4827,
    },
    {
        "id": "dt24",
        "name": "すずかけ台駅",
        "name_en": "Suzukakedai",
        "line_id": "denentoshi",
        "lat": 35.5212,
        "lng": 139.4756,
    },
    {
        "id": "dt25",
        "name": "南町田グランベリーパーク駅",
        "name_en": "MinamiMachidaGrandberryPark",
        "line_id": "denentoshi",
        "lat": 35.5123,
        "lng": 139.4705,
    },
    {
        "id": "dt26",
        "name": "つきみ野駅",
        "name_en": "Tsukimino",
        "line_id": "denentoshi",
        "lat": 35.5097,
        "lng": 139.4589,
    },
    {
        "id": "dt27",
        "name": "中央林間駅",
        "name_en": "ChuORinkan",
        "line_id": "denentoshi",
        "lat": 35.5077,
        "lng": 139.4444,
    },
    {
        "id": "z01",
        "name": "渋谷駅",
        "name_en": "Shibuya",
        "line_id": "hanzomon",
        "lat": 35.6580,
        "lng": 139.7016,
    },
    {
        "id": "z02",
        "name": "表参道駅",
        "name_en": "OmoteSando",
        "line_id": "hanzomon",
        "lat": 35.6652,
        "lng": 139.7123,
    },
    {
        "id": "z03",
        "name": "青山一丁目駅",
        "name_en": "AoyamaItchome",
        "line_id": "hanzomon",
        "lat": 35.6731,
        "lng": 139.7240,
    },
    {
        "id": "z04",
        "name": "永田町駅",
        "name_en": "Nagatacho",
        "line_id": "hanzomon",
        "lat": 35.6781,
        "lng": 139.7404,
    },
    {
        "id": "z05",
        "name": "半蔵門駅",
        "name_en": "Hanzomon",
        "line_id": "hanzomon",
        "lat": 35.6855,
        "lng": 139.7415,
    },
    {
        "id": "z06",
        "name": "九段下駅",
        "name_en": "Kudanshita",
        "line_id": "hanzomon",
        "lat": 35.6953,
        "lng": 139.7519,
    },
    {
        "id": "z07",
        "name": "神保町駅",
        "name_en": "Jimbocho",
        "line_id": "hanzomon",
        "lat": 35.6958,
        "lng": 139.7576,
    },
    {
        "id": "z08",
        "name": "大手町駅",
        "name_en": "Otemachi",
        "line_id": "hanzomon",
        "lat": 35.6848,
        "lng": 139.7649,
    },
    {
        "id": "z09",
        "name": "三越前駅",
        "name_en": "Mitsukoshimae",
        "line_id": "hanzomon",
        "lat": 35.6860,
        "lng": 139.7744,
    },
    {
        "id": "z10",
        "name": "水天宮前駅",
        "name_en": "Suitengumae",
        "line_id": "hanzomon",
        "lat": 35.6831,
        "lng": 139.7846,
    },
    {
        "id": "z11",
        "name": "清澄白河駅",
        "name_en": "KiyosumiShirakawa",
        "line_id": "hanzomon",
        "lat": 35.6821,
        "lng": 139.8000,
    },
    {
        "id": "z12",
        "name": "住吉駅",
        "name_en": "Sumiyoshi",
        "line_id": "hanzomon",
        "lat": 35.6891,
        "lng": 139.8160,
    },
    {
        "id": "z13",
        "name": "錦糸町駅",
        "name_en": "Kinshicho",
        "line_id": "hanzomon",
        "lat": 35.6968,
        "lng": 139.8144,
    },
    {
        "id": "z14",
        "name": "押上駅",
        "name_en": "Oshiage",
        "line_id": "hanzomon",
        "lat": 35.7103,
        "lng": 139.8133,
    },
]


# (以下 get_lines 等の関数はそのまま)
def get_lines():
    return ALL_LINES


def get_stations_by_line(line_id):
    # 送られてきた line_id の前後から空白や改行を完全に除去
    search_id = line_id.strip()

    # 路線の色を取得
    line_color = next(
        (l["color"] for l in ALL_LINES if l["id"] == search_id), "#333333"
    )

    # 一致判定を「完全一致」ではなく「含む（in）」または「トリム後の一致」にする
    # これにより、見えない改行コードが入っていてもヒットするようになります
    filtered = [
        {**s, "line_color": line_color}
        for s in STATIONS
        if s["line_id"].strip() == search_id
    ]

    return filtered


def get_station_by_id(station_id):
    station = next((s for s in STATIONS if s["id"] == station_id), None)
    if station:
        line_color = next(
            (l["color"] for l in ALL_LINES if l["id"] == station["line_id"]), "#333333"
        )
        return {**station, "line_color": line_color}
    return None
